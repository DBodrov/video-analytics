{"info":{"version":"0.14.dev96","title":"va","description":"powered by Flasgger","termsOfService":"/tos"},"paths":{"/api/va/heartbeat":{"get":{"summary":"# Доступность сервиса","description":"# ","responses":{"200":{"description":"Сервис доступен","schema":{"$ref":"#/definitions/heartbeat_get_response_200"}}},"tags":["Core"],"consumes":["application/json"],"produces":["application/json"]}},"/api/va/locations":{"get":{"summary":"# Сведения о всех площадках по всем компаниям","description":"# ","responses":{"200":{"description":"Сведения о всех площадках по всем компаниям","schema":{"$ref":"#/definitions/locations_get_response_200"}}},"tags":["Company"],"consumes":["application/json"],"produces":["application/json"]}},"/api/va/sensors":{"get":{"summary":"# Сведения о всех датчиках по всем компаниям","description":"# ","responses":{"200":{"description":"Сведения о всех датчиках по всем компаниям","schema":{"$ref":"#/definitions/sensors_get_response_200"}}},"tags":["Company"],"consumes":["application/json"],"produces":["application/json"]}},"/api/va/models":{"get":{"summary":"# Сведения о всех моделях расчета по всем компаниям","description":"# ","responses":{"200":{"description":"Сведения о всех моделях расчета по всем компаниям","schema":{"$ref":"#/definitions/models_get_response_200"}}},"tags":["Company"],"consumes":["application/json"],"produces":["application/json"]}},"/api/va/about":{"get":{"summary":"# Сведения о сервисе и API","description":"# ","responses":{"200":{"description":"Сведения о сервисе и API","schema":{"$ref":"#/definitions/about_get_response_200"}}},"tags":["Core"],"consumes":["application/json"],"produces":["application/json"]}},"/api/va/tocs":{"get":{"summary":"# Сведения о всех категориях отслеживаемых объектов по всем компаниям","description":"# ","responses":{"200":{"description":"Сведения о всех категориях отслеживаемых объектов по всем компаниям","schema":{"$ref":"#/definitions/tocs_get_response_200"}}},"tags":["Company"],"consumes":["application/json"],"produces":["application/json"]}},"/api/va/companies/{company_id}/events/inout/latest":{"get":{"summary":"# Учет въезжающих/выезжающих транспортных средств. Последние события","description":"# ","responses":{"200":{"description":"Последнее событие в разрезе площадки, датчика и категории транспортного средства","schema":{"$ref":"#/definitions/inout-latest-events_get_response_200"}}},"parameters":[{"name":"company_id","in":"path","type":"integer","required":true,"description":"Идентификатор компании"},{"name":"tz_offset","in":"query","type":"integer","required":false,"description":"Смещение часового пояса в часах в диапазоне от [-12, +12]. По умолчанию 0"}],"tags":["Event"],"consumes":["application/json"],"produces":["application/json"]}},"/api/va/companies/{company_id}/events/inout/stats":{"get":{"summary":"# Учет въезжающих/выезжающих транспортныех средств. Статистика","description":"# ","responses":{"200":{"description":"Статистика по въезжающим/выезжающим транспортным средствам","schema":{"$ref":"#/definitions/inout-events-stats_get_response_200"}}},"parameters":[{"name":"company_id","in":"path","type":"integer","required":true,"description":"Идентификатор компании"},{"name":"tz_offset","in":"query","type":"integer","required":false,"description":"Смещение часового пояса в часах в диапазоне от [-12, +12]. По умолчанию 0"}],"tags":["Event"],"consumes":["application/json"],"produces":["application/json"]}},"/api/va/companies/{company_id}/locations":{"get":{"summary":"# Сведения о площадках компании","description":"# ","responses":{"200":{"description":"Сведения о площадках компании","schema":{"$ref":"#/definitions/company-locations_get_response_200"}}},"parameters":[{"name":"company_id","in":"path","type":"integer","required":true,"description":"Идентификатор компании"}],"tags":["Company"],"consumes":["application/json"],"produces":["application/json"]}},"/api/va/companies/{company_id}/sensors":{"get":{"summary":"# Сведения о датчиках компании","description":"# ","responses":{"200":{"description":"Сведения о датчиках компании","schema":{"$ref":"#/definitions/company-sensors_get_response_200"}}},"parameters":[{"name":"company_id","in":"path","type":"integer","required":true,"description":"Идентификатор компании"}],"tags":["Company"],"consumes":["application/json"],"produces":["application/json"]}},"/api/va/companies/{company_id}/models":{"get":{"summary":"# Сведения о моделях по компании","description":"# ","responses":{"200":{"description":"Сведения о моделях по компании","schema":{"$ref":"#/definitions/models_get_response_200"}}},"parameters":[{"name":"company_id","in":"path","type":"integer","required":true,"description":"Идентификатор компании"}],"tags":["Company"],"consumes":["application/json"],"produces":["application/json"]},"post":{"summary":"# Сохранение модели и категорий отслеживаемых объектов","description":"# ","responses":{"201":{"description":"Данные успешно сохранены","schema":{"$ref":"#/definitions/company-models_response_201"}}},"parameters":[{"name":"company_id","in":"path","type":"integer","required":true,"description":"Идентификатор компании"},{"name":"request","in":"body","required":true,"description":"Сведения о модели и категориях отслеживаемых объектов","schema":{"$ref":"#/definitions/company-models_request"}}],"tags":["Company"],"consumes":["application/json"],"produces":["application/json"]}},"/api/va/companies/{company_id}/tocs":{"get":{"summary":"# Сведения о категориях отслеживаемых объектов по компании","description":"# ","responses":{"200":{"description":"Сведения о категориях отслеживаемых объектов по компании","schema":{"$ref":"#/definitions/company-tocs_get_response_200"}}},"parameters":[{"name":"company_id","in":"path","type":"integer","required":true,"description":"Идентификатор компании"}],"tags":["Company"],"consumes":["application/json"],"produces":["application/json"]}}},"definitions":{"heartbeat_get_response_200":{"type":"object"},"locations_get_response_200":{"type":"object","required":["locations"],"properties":{"locations":{"type":"array","items":{"type":"object","required":["id","code","name","description","by_default","company_id","category"],"description":"Сведения о площадке","properties":{"id":{"type":"integer","description":"Идентификатор площадки"},"code":{"type":"string","description":"Код площадки"},"name":{"type":"string","description":"Краткое название площадки"},"description":{"type":"string","description":"Описание площадки"},"by_default":{"type":"boolean","description":"Отображаемая площадка по умолчанию"},"company_id":{"type":"integer","description":"Идентификатор компании"},"category":{"type":"object","required":["id","code","name","description"],"description":"Категория площадки","properties":{"id":{"type":"integer","description":"Идентификатор категории"},"name":{"type":"string","description":"Краткое название категории"},"code":{"type":"string","description":"Код категории"},"description":{"type":"string","description":"Описание категории"}}}}}}}},"sensors_get_error":{"type":"object","required":["details","message","path","status_code"],"description":"Сведения об ошибке","properties":{"details":{"type":"object","description":"Контекст выполнения и значение переменных"},"message":{"type":"string","description":"Сообщение об ошибке"},"path":{"type":"string","description":"Путь к запрашиваемому ресурсу"},"status_code":{"description":"HTTP-код ответа","type":"integer"}}},"sensors_get_response_200":{"type":"object","required":["sensors"],"properties":{"sensors":{"type":"array","items":{"type":"object","required":["id","code","name","description","by_default","company_id","category"],"description":"Сведения о датчике","properties":{"id":{"type":"integer","description":"Идентификатор датчика"},"code":{"type":"string","description":"Код датчика"},"name":{"type":"string","description":"Краткое название датчика"},"description":{"type":"string","description":"Описание датчика"},"by_default":{"type":"boolean","description":"Отображаемый датчик по умолчанию"},"company_id":{"type":"integer","description":"Идентификатор компании"},"category":{"type":"object","required":["id","code","name","description"],"description":"Категория датчика","properties":{"id":{"type":"integer","description":"Идентификатор категории"},"name":{"type":"string","description":"Краткое название категории"},"code":{"type":"string","description":"Категория"},"description":{"type":"string","description":"Описание категории"}}}}}}}},"models_get_response_200":{"type":"object","required":["models"],"properties":{"models":{"type":"array","items":{"type":"object","required":["id","code","name","description","company_id","tracked_object_categories"],"description":"Сведения о модели","properties":{"id":{"type":"integer","description":"Идентификатор модели"},"code":{"type":"string","description":"Код модели"},"name":{"type":"string","description":"Краткое название модели"},"description":{"type":"string","description":"Описание модели"},"company_id":{"type":"integer","description":"Идентификатор компании"},"tracked_object_categories":{"type":"array","items":{"type":"object","required":["id","code","name","description"],"description":"Категория отслеживаемого объекта","properties":{"id":{"type":"integer","description":"Идентификатор категории отслеживаемого объекта"},"code":{"type":"string","description":"Код категории отслеживаемого объекта"},"name":{"type":"string","description":"Краткое название категории отслеживаемого объекта"},"description":{"type":"string","description":"Описание категории отслеживаемого объекта"}}}}}}}}},"about_get_response_200":{"type":"object","description":"Сведения о сервисе и API","required":["commit","env","name","resources","timestamp","version"],"properties":{"commit":{"type":"string","description":"Идентификатор последнего коммита"},"env":{"type":"string","description":"Название среды"},"name":{"type":"string","description":"Название сервиса"},"resources":{"type":"array","description":"Методы API","items":{"type":"object","required":["name","methods","section","urls"],"properties":{"name":{"type":"string","description":"Название метода"},"methods":{"type":"array","items":{"type":"string","description":"Доступные HTTP-методы"}},"section":{"type":"string","description":"Раздел"},"urls":{"type":"array","items":{"type":"string","description":"Перечень URL, по которым доступен метод"}}}}},"timestamp":{"type":"string","description":"Дата и время сборки"},"version":{"type":"string","description":"Версия API"}}},"tocs_get_response_200":{"type":"object","required":["tracked_object_categories"],"properties":{"tracked_object_categories":{"type":"array","items":{"type":"object","required":["id","code","name","description","by_default","company_id","models"],"description":"Сведения о категории","properties":{"id":{"type":"integer","description":"Идентификатор категории"},"code":{"type":"string","description":"Код категории"},"name":{"type":"string","description":"Краткое название категории"},"description":{"type":"string","description":"Описание категории"},"by_default":{"type":"boolean","description":"Отображаемая категория умолчанию"},"company_id":{"type":"integer","description":"Идентификатор компании"},"models":{"type":"array","items":{"type":"object","required":["id","code","name","description"],"description":"Сведения о модели","properties":{"id":{"type":"integer","description":"Идентификатор модели"},"code":{"type":"string","description":"Код модели"},"name":{"type":"string","description":"Краткое название модели"},"description":{"type":"string","description":"Описание модели"}}}}}}}}},"inout-latest-events_get_response_200":{"type":"object","required":["events"],"properties":{"events":{"type":"array","items":{"type":"object","required":["location","sensor","tracked_object_category"],"description":"Сведения о последнем событии","properties":{"location":{"type":"object","required":["id"],"description":"Сведения о площадке","properties":{"id":{"type":"integer","description":"Идентификатор площадки"}}},"sensor":{"type":"object","required":["id"],"description":"Сведения о датчике","properties":{"id":{"type":"integer","description":"Идентификатор датчика"}}},"tracked_object_category":{"type":"object","required":["id"],"description":"Сведения о категории отслеживаемых объектов","properties":{"id":{"type":"integer","description":"Идентификатор категории отслеживаемых объектов"}}},"event":{"type":"object","required":["code","timestamp"],"description":"Описание события","properties":{"code":{"type":"string","description":"Идентификатор события"},"timestamp":{"type":"string","description":"Дата и время совершения события"}}},"image":{"type":"object","required":["compression","content"],"description":"Изображение","properties":{"compression":{"type":"string","description":"Формат изображения"},"content":{"type":"string","description":"Содержимое изображения в формате Base64"}}},"tracked_object":{"type":"object","required":["code","license_plate_number"],"description":null,"properties":{"code":{"type":"string","description":"Код отслеживаемого объекта"},"license_plate_number":{"type":"string","description":"Государственный регистрационный номер транспортного средства"}}}}}}}},"inout-events-stats_get_response_200":{"type":"object","required":["stats"],"properties":{"stats":{"type":"array","items":{"type":"object","required":["location","sensor","tracked_object_category","today"],"description":"Статистика за текущий день","properties":{"location":{"type":"object","required":["id"],"description":"Сведения о площадке","properties":{"id":{"type":"integer","description":"Идентификатор площадки"}}},"sensor":{"type":"object","required":["id"],"description":"Сведения о датчике","properties":{"id":{"type":"integer","description":"Идентификатор датчика"}}},"tracked_object_category":{"type":"object","required":["id"],"description":"Сведения о категории отслеживаемых объектов","properties":{"id":{"type":"integer","description":"Идентификатор категории отслеживаемых объектов"}}},"today":{"type":"object","required":["date","in_count","out_count"],"description":"Метрики","properties":{"in_count":{"type":"integer","description":"Количество въехавших транспортных средств"},"out_count":{"type":"integer","description":"Количество выехавших транспортных средств"},"date":{"type":"string","description":"Отчетная дата"}}}}}}}},"company-locations_get_response_200":{"type":"object","required":["locations"],"properties":{"locations":{"type":"array","items":{"type":"object","required":["id","code","name","description","by_default","company_id","category"],"description":"Сведения о площадке","properties":{"id":{"type":"integer","description":"Идентификатор площадки"},"code":{"type":"string","description":"Код площадки"},"name":{"type":"string","description":"Краткое название площадки"},"description":{"type":"string","description":"Описание площадки"},"by_default":{"type":"boolean","description":"Отображаемая площадка по умолчанию"},"company_id":{"type":"integer","description":"Идентификатор компании"},"category":{"type":"object","required":["id","code","name","description"],"description":"Категория площадки","properties":{"id":{"type":"integer","description":"Идентификатор категории"},"name":{"type":"string","description":"Краткое название категории"},"code":{"type":"string","description":"Код категории"},"description":{"type":"string","description":"Описание категории"}}}}}}}},"company-sensors_get_response_200":{"type":"object","required":["sensors"],"properties":{"sensors":{"type":"array","items":{"type":"object","required":["id","code","name","description","by_default","company_id","category"],"description":"Сведения о датчике","properties":{"id":{"type":"integer","description":"Идентификатор датчика"},"code":{"type":"string","description":"Код датчика"},"name":{"type":"string","description":"Краткое название датчика"},"description":{"type":"string","description":"Описание датчика"},"by_default":{"type":"boolean","description":"Отображаемый датчик по умолчанию"},"company_id":{"type":"integer","description":"Идентификатор компании"},"category":{"type":"object","required":["id","code","name","description"],"description":"Категория датчика","properties":{"id":{"type":"integer","description":"Идентификатор категории"},"name":{"type":"string","description":"Краткое название категории"},"code":{"type":"string","description":"Категория"},"description":{"type":"string","description":"Описание категории"}}}}}}}},"company-models_request":{"type":"object","required":["model"],"properties":{"model":{"type":"object","required":["code","name","description"],"description":"Сведения о модели","properties":{"code":{"type":"string","description":"Код модели"},"name":{"type":"string","description":"Краткое название модели"},"description":{"type":"string","description":"Описание модели"}}},"tracked_object_categories":{"type":"array","items":{"type":"object","required":["code","name","description"],"description":"Категория отслеживаемого объекта","properties":{"code":{"type":"string","description":"Код категории отслеживаемого объекта"},"name":{"type":"string","description":"Краткое название категории отслеживаемого объекта"},"description":{"type":"string","description":"Описание категории отслеживаемого объекта"}}}}}},"company-models_response_201":{"type":"object"},"company-tocs_get_response_200":{"type":"object","required":["tracked_object_categories"],"properties":{"tracked_object_categories":{"type":"array","items":{"type":"object","required":["id","code","name","description","by_default","company_id","models"],"description":"Сведения о категории","properties":{"id":{"type":"integer","description":"Идентификатор категории"},"code":{"type":"string","description":"Код категории"},"name":{"type":"string","description":"Краткое название категории"},"description":{"type":"string","description":"Описание категории"},"by_default":{"type":"boolean","description":"Отображаемая категория умолчанию"},"company_id":{"type":"integer","description":"Идентификатор компании"},"models":{"type":"array","items":{"type":"object","required":["id","code","name","description"],"description":"Сведения о модели","properties":{"id":{"type":"integer","description":"Идентификатор модели"},"code":{"type":"string","description":"Код модели"},"name":{"type":"string","description":"Краткое название модели"},"description":{"type":"string","description":"Описание модели"}}}}}}}}}},"swagger":"2.0","swaggerUiPrefix":""}
